'use client'
import { useState } from 'react'
import { api } from '@/lib/api'
import { useRouter } from 'next/navigation'
export default function Register(){ const [name,setName]=useState(''); const [email,setEmail]=useState(''); const [password,setPassword]=useState(''); const [error,setError]=useState<string|null>(null); const router=useRouter(); const submit=async(e:any)=>{ e.preventDefault(); setError(null); try{ await api('/auth/register',{ method:'POST', body: JSON.stringify({ name,email,password }) }); router.push('/auth/login?registered=1') }catch(e:any){ setError(e.message) } }; return (<main className='container-app py-10'><div className='max-w-md mx-auto card'><h1 className='text-xl font-semibold mb-3'>Cadastro</h1><form onSubmit={submit} className='space-y-3'><input className='input' placeholder='Nome' value={name} onChange={e=>setName(e.target.value)} required/><input className='input' placeholder='Email' value={email} type='email' onChange={e=>setEmail(e.target.value)} required/><input className='input' placeholder='Senha (min 6)' value={password} type='password' minLength={6} onChange={e=>setPassword(e.target.value)} required/>{error&&<div className='text-red-400 text-sm'>{error}</div>}<button className='btn w-full'>Criar conta</button></form></div></main>) }
